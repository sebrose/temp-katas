{"coordinate.js":"module.exports = function Coordinate(x, y) {\n\n  this.x = x\n  this.y = y\n\n  this.distanceFrom = function(other) {\n    var xs = Math.abs(this.x - other.x),\n        ys = Math.abs(this.y - other.y)\n    xs *= xs\n    ys *= ys\n    return Math.sqrt(xs + ys)\n  }\n};\n","tests/coordinate.test.js":"var assert = require('assert')\nvar Coordinate = require('../coordinate')\n\ndescribe(\"coordinate class\", () => {\n\n  it(\"should calculate the distance from itself\", () => {\n    var a = new Coordinate(0, 0)\n    assert.equal(a.distanceFrom(a), 0)\n  })\n\n  it(\"should calculate the distance from another coordinate along X axis\", ()=>{\n    var a = new Coordinate(0, 0)\n    var b = new Coordinate(600, 0)\n\n    assert.equal(a.distanceFrom(b), 600)\n  })\n\n  it(\"should calculate the distance from another coordinate\", ()=>{\n     var a = new Coordinate(0, 0)\n     var b = new Coordinate(300, 400)\n \n     assert.equal(a.distanceFrom(b), 500)\n   })\n})\n","features/hear_shout.feature":"Feature: Hear Shout\n\n  Shouts have a range of approximately 1000m\n  \n  \n\n  Background:\n    Given Lucy is at 0, 0  \n Scenario Outline: only hear in range shouts\n  And Sean is at <Seans-location>\n  When Sean shouts\n  Then Lucy should hear <what-Lucy-hears>\n  \n  Examples: some simple examples\n    | Seans-location  | what-Lucy-hears |\n    | 0, 900          | Sean            |\n    | 800, 800        | nothing         |\n \n \n @wop\n Scenario: Multiple shouts from one person\n    And Sean is at 0, 500\n    When Sean shouts\n    And Sean shouts\n    Then Lucy should hear 2 shouts from Sean\n\n # Scenario: Out of range shout is not heard\n #   Given Lucy is at 0, 0\n #   And Sean is at 800, 800\n    # This means Sean is approximately 1130m from Lucy\n #   When Sean shouts\n #   Then Lucy should hear nothing\n  @wip\n  Scenario: Multiple shouters\n    Given people are located at\n      | name  | x    | y   |\n      | Lucy  | 0    | 0   |\n      | Sean  | 0    | 500 |\n      | Oscar | 1100 | 0   |\n    When Sean shouts\n    And Oscar shouts\n    Then Lucy should not hear Oscar\n    But Lucy should hear Sean\n    \n    \n\n  Scenario: Multiple out of range shouters are not heard\n    Given Sean is at 0, 0\n    And Lucy is at 800, 800\n    And Marco is at 900, 1800\n    When Lucy shouts\n    And Marco shouts\n    Then Sean should hear nothing\n    \n  Scenario: Shouter should not hear own shout\n    Given Sean is at 0, 0\n    When Sean shouts\n    Then Sean should hear nothing","shouty.js":"module.exports = function Shouty() {\n  const MESSAGE_RANGE = 1000\n  this.locations = {}\n  this.shouts = {}\n\n  this.setLocation = function(person, coordinate) {\n    this.locations[person] = coordinate\n  }\n\n  this.shout = function(person, shout, time) {\n    shout = {shout: shout, time: new Data(time)}\n    \n    if(!(person in this.shouts)) {\n      this.shouts[person] = []\n    }\n    this.shouts[person].push(shout)\n  }\n\n  this.getShoutsHeardBy = function(listener) {\n    var shoutsHeard = {}\n    Object.keys(this.shouts).forEach(shouter => {\n        var personsShouts = this.shouts[shouter]\n        var distance = this.locations[listener].distanceFrom(this.locations[shouter])\n\n        if(listener != shouter && distance < MESSAGE_RANGE) {\n          shoutsHeard[shouter] = personsShouts\n        }\n    })\n\n    return shoutsHeard\n  }\n}\n","features/world.js":"const { setWorldConstructor } = require('cucumber')\nconst Shouty = require('../shouty')\nfunction CustomWorld() {\n  this.shouty = new Shouty()\n}\n\nsetWorldConstructor(CustomWorld)\n","cyber-dojo.sh":"NODE_VERSION=8.4.0\n\necho JASMINE TESTS\necho =============\n\nn use ${NODE_VERSION} /usr/local/lib/node_modules/jasmine/bin/jasmine \\\n  JASMINE_CONFIG_PATH=tests/jasmine.json\n\n# You have to cd to a specific folder because\n#   ~/node_modules/cucumber/bin/cucumber.js\n# contains the line\n# require('../lib/cli/run.js').default();\n# Go figure!\n\ncd ~/node_modules/cucumber/bin\n\nexport NODE_PATH=/home/$CYBER_DOJO_AVATAR_NAME/node_modules\n\necho CUCUMBER FEATURES\necho =================\n\n./cucumber.js \\\n  --format-options '{\"colorsEnabled\":false}' \\\n  --format-options '{\"snippetInterface\":\"synchronous\"}' \\\n  ${CYBER_DOJO_SANDBOX}/features/*.feature\n","tests/jasmine.json":"{\n    \"spec_dir\": \"tests\",\n    \"spec_files\": [ \"*[tT]est.js\" ],\n    \"helpers\": [ \"*helper.js\" ]\n}\n","output":"JASMINE TESTS\n=============\nStarted\n...\n\n\n3 specs, 0 failures\nFinished in 0.007 seconds\n\nCUCUMBER FEATURES\n=================\n...F-.....F-...before hook\n...F--...before hook\n...F---.......F--.....F-.....F--..\n\nFailures:\n\n1) Scenario: only hear in range shouts # ../../../../../sandboxes/toucan/features/hear_shout.feature:16\n   ✔ Before # ../../../../../sandboxes/toucan/features/shout_steps.js:9\n   ✔ Given Lucy is at 0, 0 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✔ And Sean is at 0, 900 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✖ When Sean shouts # ../../../../../sandboxes/toucan/features/shout_steps.js:17\n       ReferenceError: Data is not defined\n           at Shouty.shout (/sandboxes/toucan/shouty.js:11:38)\n           at CustomWorld.<anonymous> (/sandboxes/toucan/features/shout_steps.js:18:15)\n   - Then Lucy should hear Sean # ../../../../../sandboxes/toucan/features/shout_steps.js:21\n   ✔ After # ../../../../../sandboxes/toucan/features/shouty_hooks.js:6\n   ✔ After # ../../../../../sandboxes/toucan/features/shout_steps.js:13\n\n2) Scenario: only hear in range shouts # ../../../../../sandboxes/toucan/features/hear_shout.feature:17\n   ✔ Before # ../../../../../sandboxes/toucan/features/shout_steps.js:9\n   ✔ Given Lucy is at 0, 0 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✔ And Sean is at 800, 800 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✖ When Sean shouts # ../../../../../sandboxes/toucan/features/shout_steps.js:17\n       ReferenceError: Data is not defined\n           at Shouty.shout (/sandboxes/toucan/shouty.js:11:38)\n           at CustomWorld.<anonymous> (/sandboxes/toucan/features/shout_steps.js:18:15)\n   - Then Lucy should hear nothing # ../../../../../sandboxes/toucan/features/shout_steps.js:25\n   ✔ After # ../../../../../sandboxes/toucan/features/shouty_hooks.js:6\n   ✔ After # ../../../../../sandboxes/toucan/features/shout_steps.js:13\n\n3) Scenario: Multiple shouts from one person # ../../../../../sandboxes/toucan/features/hear_shout.feature:21\n   ✔ Before # ../../../../../sandboxes/toucan/features/shout_steps.js:9\n   ✔ Before # ../../../../../sandboxes/toucan/features/shouty_hooks.js:2\n   ✔ Given Lucy is at 0, 0 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✔ And Sean is at 0, 500 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✖ When Sean shouts # ../../../../../sandboxes/toucan/features/shout_steps.js:17\n       ReferenceError: Data is not defined\n           at Shouty.shout (/sandboxes/toucan/shouty.js:11:38)\n           at CustomWorld.<anonymous> (/sandboxes/toucan/features/shout_steps.js:18:15)\n   - And Sean shouts # ../../../../../sandboxes/toucan/features/shout_steps.js:17\n   - Then Lucy should hear 2 shouts from Sean # ../../../../../sandboxes/toucan/features/shout_steps.js:31\n   ✔ After # ../../../../../sandboxes/toucan/features/shouty_hooks.js:6\n   ✔ After # ../../../../../sandboxes/toucan/features/shout_steps.js:13\n\n4) Scenario: Multiple shouters # ../../../../../sandboxes/toucan/features/hear_shout.feature:34\n   ✔ Before # ../../../../../sandboxes/toucan/features/shout_steps.js:9\n   ✔ Before # ../../../../../sandboxes/toucan/features/shouty_hooks.js:2\n   ✔ Given Lucy is at 0, 0 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✔ Given people are located at # ../../../../../sandboxes/toucan/features/location_steps.js:6\n       | name  | x    | y   |\n       | Lucy  | 0    | 0   |\n       | Sean  | 0    | 500 |\n       | Oscar | 1100 | 0   |\n   ✖ When Sean shouts # ../../../../../sandboxes/toucan/features/shout_steps.js:17\n       ReferenceError: Data is not defined\n           at Shouty.shout (/sandboxes/toucan/shouty.js:11:38)\n           at CustomWorld.<anonymous> (/sandboxes/toucan/features/shout_steps.js:18:15)\n   - And Oscar shouts # ../../../../../sandboxes/toucan/features/shout_steps.js:17\n   - Then Lucy should not hear Oscar # ../../../../../sandboxes/toucan/features/shout_steps.js:28\n   - But Lucy should hear Sean # ../../../../../sandboxes/toucan/features/shout_steps.js:21\n   ✔ After # ../../../../../sandboxes/toucan/features/shouty_hooks.js:6\n   ✔ After # ../../../../../sandboxes/toucan/features/shout_steps.js:13\n\n5) Scenario: Multiple out of range shouters are not heard # ../../../../../sandboxes/toucan/features/hear_shout.feature:47\n   ✔ Before # ../../../../../sandboxes/toucan/features/shout_steps.js:9\n   ✔ Given Lucy is at 0, 0 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✔ Given Sean is at 0, 0 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✔ And Lucy is at 800, 800 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✔ And Marco is at 900, 1800 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✖ When Lucy shouts # ../../../../../sandboxes/toucan/features/shout_steps.js:17\n       ReferenceError: Data is not defined\n           at Shouty.shout (/sandboxes/toucan/shouty.js:11:38)\n           at CustomWorld.<anonymous> (/sandboxes/toucan/features/shout_steps.js:18:15)\n   - And Marco shouts # ../../../../../sandboxes/toucan/features/shout_steps.js:17\n   - Then Sean should hear nothing # ../../../../../sandboxes/toucan/features/shout_steps.js:25\n   ✔ After # ../../../../../sandboxes/toucan/features/shouty_hooks.js:6\n   ✔ After # ../../../../../sandboxes/toucan/features/shout_steps.js:13\n\n6) Scenario: Shouter should not hear own shout # ../../../../../sandboxes/toucan/features/hear_shout.feature:55\n   ✔ Before # ../../../../../sandboxes/toucan/features/shout_steps.js:9\n   ✔ Given Lucy is at 0, 0 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✔ Given Sean is at 0, 0 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✖ When Sean shouts # ../../../../../sandboxes/toucan/features/shout_steps.js:17\n       ReferenceError: Data is not defined\n           at Shouty.shout (/sandboxes/toucan/shouty.js:11:38)\n           at CustomWorld.<anonymous> (/sandboxes/toucan/features/shout_steps.js:18:15)\n   - Then Sean should hear nothing # ../../../../../sandboxes/toucan/features/shout_steps.js:25\n   ✔ After # ../../../../../sandboxes/toucan/features/shouty_hooks.js:6\n   ✔ After # ../../../../../sandboxes/toucan/features/shout_steps.js:13\n\n7) Scenario: Get acrtive shout when in range # ../../../../../sandboxes/toucan/features/moving_people.feature:9\n   ✔ Before # ../../../../../sandboxes/toucan/features/shout_steps.js:9\n   ✔ Given Lucy is at 0, 0 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✔ And Sean is at 1000, 1000 # ../../../../../sandboxes/toucan/features/location_steps.js:13\n   ✖ And Sean shouts at 2018-05-07T10:00:00 # ../../../../../sandboxes/toucan/features/shout_steps.js:35\n       ReferenceError: Data is not defined\n           at Shouty.shout (/sandboxes/toucan/shouty.js:11:38)\n           at CustomWorld.<anonymous> (/sandboxes/toucan/features/shout_steps.js:36:15)\n   - When Lucy moves to 1000, 1000 # ../../../../../sandboxes/toucan/features/location_steps.js:17\n   - Then Lucy should hear 1 shouts from Sean # ../../../../../sandboxes/toucan/features/shout_steps.js:31\n   ✔ After # ../../../../../sandboxes/toucan/features/shouty_hooks.js:6\n   ✔ After # ../../../../../sandboxes/toucan/features/shout_steps.js:13\n\n7 scenarios (7 failed)\n35 steps (7 failed, 12 skipped, 16 passed)\n0m00.009s\n","features/shout_steps.js":"var {Before, Given, When, Then, After } = require('cucumber')\nvar assert = require('assert')\n//var Shouty = require('../shouty')\nvar Coordinate = require('../coordinate')\n\nconst ARBITARY_MESSAGE = 'Hello, world'\n//let shouty\n\nBefore(function() {\n  //console.log('shout before')\n})\n\nAfter(function() {\n  //console.log('shout after')\n})\n\nThen('{word} shouts', function (name) {\n  this.shouty.shout(name, ARBITARY_MESSAGE)\n})\n\nThen('Lucy should hear Sean', function () {\n  assert.equal(Object.keys(this.shouty.getShoutsHeardBy('Lucy')).length, 1)\n})\n\nThen('{word} should hear nothing', function (name) {\n  assert.equal(Object.keys(this.shouty.getShoutsHeardBy(name)).length, 0)\n})\nThen('Lucy should not hear Oscar', function () {\n  assert.equal(Object.keys(this.shouty.getShoutsHeardBy('Lucy')).length, 1)           \n})      \nThen('{word} should hear {int} shouts from Sean', function (name, int) {\n           // Write code here that turns the phrase above into concrete actions\n  assert.equal(this.shouty.getShoutsHeardBy(name)['Sean'].length, int)           \n});\nGiven('{word} shouts at {int}{int}{int}T{int}:{int}:{int}', function (name, y, m, d, h, m, s) {\n  this.shouty.shout(name, ARBITARY_MESSAGE, y+\"-\"+m+\"-\"+d+\"T\"+h+\":\"+m+\":\"+s)\n});\n","features/location_steps.js":"var {Before, Given, When, Then } = require('cucumber')\nvar assert = require('assert')\nvar Coordinate = require('../coordinate')\n\n\nThen('people are located at', function (dataTable) {\n           // Write code here that turns the phrase above into concrete actions\n  dataTable.hashes().forEach(row => {\n  this.shouty.setLocation(row.name, new Coordinate(row.x, row.y))\n  })\n})\n\nThen('{word} is at {coordinate}', function (name, coordinate) {\n  this.shouty.setLocation(name, coordinate)\n})\n\nWhen('{word} moves to {coordinate}', function (name, coordinate) {\n  this.shouty.setLocation(name, coordinate)\n});","features/shouty_hooks.js":"var {Before, After} = require('cucumber')\nBefore({tags: \"@wop or @wip\"}, function() {\n  console.log('before hook')\n})\n\nAfter(function() {\n  //console.log('after hook')\n})","features/parameters_types.js":"const { defineParameterType } = require('cucumber')\nconst Coordinate = require('../coordinate')\n\ndefineParameterType({\n  regexp: /(\\d+), (\\d+)/,\n  transformer: (x, y) => new Coordinate(parseInt(x), parseInt(y)),\n  name: 'coordinate'\n})","features/moving_people.feature":"Feature: Moving people\n\n  A user has a location\n  Users don't receive shouts multiple times\n  Shouts expire after 60mins\n  Users receive active shout when in range\n \n  @move\n  Scenario: Get acrtive shout when in range\n    Given Lucy is at 0, 0\n    And Sean is at 1000, 1000\n    And Sean shouts at 2018-05-07T10:00:00\n    When Lucy moves to 1000, 1000\n    Then Lucy should hear 1 shouts from Sean"}